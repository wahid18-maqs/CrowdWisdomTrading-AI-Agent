crew_config:
  name: "CrowdWisdomTrading Financial AI Agent"
  description: "Sequential 5-phase financial workflow: Search → Summary → Format → Translate → Send"
  process: "sequential"
  verbose: true
  memory: true
  max_execution_time: 900  # 15 minutes
  
  # Retry Configuration (matches Python retry logic)
  retry_settings:
    max_retries: 3
    initial_wait_time: 5
    backoff_multiplier: 1  # 5s, 10s, 15s
    retry_on_errors:
      - "429"  # Rate limit
      - "quota"
      - "rate limit"


# WORKFLOW PHASES CONFIGURATION

workflow_phases:
  # Phase 1: Search
  search_phase:
    description: "Search for latest US financial news from past 2 hours"
    focus: "Major stock movements, earnings, economic data"
    expected_output: "Structured list of recent US financial news with titles, summaries, sources"
    timeout_seconds: 120
    
  # Phase 2: Summary  
  summary_phase:
    description: "Create concise market summary under 500 words"
    structure:
      - "Market Overview (2-3 sentences)"
      - "Key Movers (top stocks)"
      - "Sector Analysis" 
      - "Economic Highlights"
      - "Tomorrow's Watch"
    requirements:
      - "Professional language"
      - "Specific figures"
      - "Under 500 words"
    rate_limiting: "gemini"
    timeout_seconds: 180
    
  # Phase 3: Formatting
  formatting_phase:
    description: "Format summary with 1-2 relevant charts/images"
    requirements:
      - "Use financial_image_finder tool"
      - "Integrate images with markdown format"
      - "Well-formatted final summary"
    rate_limiting: "gemini" 
    timeout_seconds: 150
    
  # Phase 4: Translation
  translation_phase:
    description: "Translate to Arabic, Hindi, Hebrew"
    languages: ["arabic", "hindi", "hebrew"]
    requirements:
      - "Keep stock symbols unchanged (AAPL, MSFT, etc.)"
      - "Preserve all numbers, percentages, currency values"
      - "Maintain markdown formatting"
      - "Use professional financial terminology"
      - "If unsure, keep English in parentheses"
    timeout_seconds: 120
    
  # Phase 5: Sending
  sending_phase:
    description: "Send to Telegram channels"
    send_order:
      1: "english"
      2: "arabic" 
      3: "hindi"
      4: "hebrew"
    message_delay_seconds: 2
    timeout_seconds: 90

# AGENT CONFIGURATION 

agents:
  search_agent:
    role: "Financial News Search Specialist"
    goal: "Search and gather the latest US financial news and market data efficiently."
    backstory: >
      You are an expert financial news researcher with deep knowledge of
      US markets. You excel at finding the most relevant and recent financial news from
      reliable sources like Bloomberg, Reuters, CNBC, and MarketWatch. You work efficiently
      to minimize API calls while maximizing information quality.
    tools: ["tavily_financial_search", "serper_financial_search"]
    max_iter: 2
    
  summary_agent:
    role: "Senior Financial Market Analyst" 
    goal: "Create concise, actionable financial market summaries under 500 words efficiently."
    backstory: >
      You are a seasoned financial analyst with 15+ years of experience
      in equity research and market analysis. You excel at distilling complex financial
      information into clear, actionable insights quickly and efficiently. You understand
      the importance of working within API constraints while maintaining quality.
    tools: []
    max_iter: 1
    
  formatting_agent:
    role: "Financial Content Formatter and Visualization Expert"
    goal: "Format financial summaries with relevant visual elements efficiently."
    backstory: >
      You are a skilled financial content specialist who combines
      analytical expertise with visual design knowledge. You work efficiently to
      create well-formatted content with appropriate visual elements while being
      mindful of resource constraints.
    tools: ["financial_image_finder"]
    max_iter: 1
    
  translation_agent:
    role: "Multilingual Financial Translation Specialist"
    goal: "Translate financial content accurately while preserving technical terminology."
    backstory: >
      You are a professional financial translator with expertise in
      Arabic, Hindi, and Hebrew. You work efficiently to provide accurate translations
      while being mindful of API rate limits. You preserve all financial terms,
      numbers, and formatting in your translations.
    tools: ["financial_translator"]
    max_iter: 1
    
  send_agent:
    role: "Financial Content Distribution Manager"
    goal: "Efficiently distribute financial summaries to Telegram channels."
    backstory: >
      You are a digital content distribution expert specializing in
      financial communications. You ensure timely, accurate dissemination of information
      through Telegram while working efficiently within system constraints.
    tools: ["telegram_sender"]
    max_iter: 1


# LLM CONFIGURATION 

llm_config:
  model: "gemini/gemini-2.5-flash"
  temperature: 0.3
  max_tokens: 2048
  request_timeout: 60
  api_key_env: "GOOGLE_API_KEY"

# TOOLS CONFIGURATION

tools:
  tavily_financial_search:
    max_results: 10
    search_depth: "advanced"
    timeout_seconds: 30
    
  serper_financial_search:
    num_results: 10
    time_range: "qdr:h1"  
    country: "us"
    language: "en"
    timeout_seconds: 25
    
  financial_image_finder:
    max_images: 2
    image_types: ["stock_chart", "market_graph", "financial_visualization"]
    timeout_seconds: 20
    
  financial_translator:
    preserve_formatting: true
    financial_terminology_mode: true
    quality_check: true
    timeout_seconds: 30
    
  telegram_sender:
    parse_mode: "Markdown"
    disable_web_page_preview: false
    rate_limit_compliance: true
    timeout_seconds: 30

# ERROR HANDLING & RECOVERY
error_handling:
  
  phase_failures:
    search_failure:
      - "Return error message with 'Error' prefix"
      - "Stop workflow execution"
      
    summary_failure:
      - "Return error message with 'Error' prefix"
      - "Stop workflow execution"
      
    formatting_failure:
      - "Return error message with 'Error' prefix"
      - "Stop workflow execution"
      
    translation_failure:
      - "Continue with remaining languages"
      - "Mark failed translations"
      - "Skip failed translations in sending phase"
      
    sending_failure:
      - "Continue with remaining languages"
      - "Log send results per language"
      - "Report completion status"


# RATE LIMITING 

rate_limiting:
  gemini:
    enabled: true
    rpm_limit: 60
    apply_to_phases: ["summary", "formatting"]
    
  search_apis:
    enabled: true  
    rpm_limit: 100
    
  telegram:
    enabled: true
    rpm_limit: 30
    message_delay: 2

# OUTPUT CONFIGURATION

output:
  execution_results:
    store_intermediate: true
    phases_tracked:
      - "search"
      - "summary" 
      - "formatted_summary"
      - "translations"
      - "send_results"
      
  success_response:
    include_status: true
    include_results: true
    include_execution_time: true
    include_summary:
      - "english_summary_excerpt"
      - "translations_completed"
      - "sends_completed"
      
  failure_response:
    include_status: true
    include_error_message: true
    include_failed_phase: true


# LOGGING & MONITORING

logging:
  level: "INFO"
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
  log_phases: true
  log_retry_attempts: true
  log_rate_limiting: true
  log_to_console: true


# FINANCIAL DATA REQUIREMENTS

financial_requirements:
  market_focus: "US"
  news_timeframe: "past 2 hours"
  summary_max_words: 500
  
  required_sources:
    - "bloomberg.com"
    - "reuters.com" 
    - "cnbc.com"
    - "marketwatch.com"
    
  preserve_in_translations:
    - "stock_symbols"  
    - "numbers"
    - "percentages" 
    - "currency_values"
    - "markdown_formatting"

# TELEGRAM DELIVERY
telegram:
  delivery_order: ["english", "arabic", "hindi", "hebrew"]
  language_settings:
    arabic:
      language_param: "arabic"
    hindi:
      language_param: "hindi"
    hebrew:
      language_param: "hebrew"
    english:
      language_param: "english"

# METADATA
metadata:
  config_version: "1.0.0"
  aligned_with: "FinancialMarketCrew Python implementation"
  workflow_type: "sequential_5_phase"
  created_date: "2024-01-15"

