search_financial_news:
  description: >
    Search for recent US financial news from the last 1-2 hours.
    
    Focus on gathering comprehensive data regarding:
    - Major stock movements (significant gains or losses)
    - Corporate earnings reports and major announcements
    - Key economic data releases (e.g., inflation, employment)
    - News related to the Federal Reserve's policies
    - Overall market sector performance
    
    Use both the tavily_financial_search and serper_financial_search tools
    to ensure complete coverage of the latest market-moving information.
  expected_output: >
    A structured JSON or markdown object containing a list of 5-10
    highly relevant news items. Each item must include a title, source, timestamp,
    and a concise summary. Also, identify and include any mentioned stock symbols.
  agent: search_agent
  tools:
    - tavily_financial_search
    - serper_financial_search
  context: []
  output_format: "structured_text"

# Task 2: Create Financial Summary
create_summary:
  description: >
    Analyze the provided financial news data and create a concise,
    actionable financial market summary suitable for investors. The total length
    should be under 500 words.
    
    The summary must be structured with the following sections:
    1. **Market Overview**: A brief (2-3 sentence) summary of the overall market sentiment.
    2. **Key Movers**: List the top 3-5 performing and underperforming stocks.
    3. **Sector Analysis**: Highlight the best and worst-performing market sectors.
    4. **Economic Highlights**: Note any significant economic data that was released.
    5. **Tomorrow's Watch**: Briefly mention what investors should look out for next.
    
    Maintain a professional tone, use CAPS for stock symbols (e.g., AAPL), and
    include specific figures like percentage changes.
  expected_output: >
    A professionally written financial summary, under 500 words,
    with clear, well-defined sections as described.
  agent: summary_agent
  tools: []
  context: 
    - search_financial_news
  output_format: "markdown"
  requirements:
    max_words: 500
    required_sections:
      - "Market Overview"
      - "Key Movers"
      - "Sector Analysis"
      - "Economic Highlights"
      - "Tomorrow's Watch"
    formatting:
      - "Professional tone"
      - "CAPS for stock symbols"
      - "Include percentage changes"
      - "Include specific figures"

# Task 3: Format with Images
format_with_images:
  description: >
    Take the financial summary and format it for publication.
    
    Use the financial_image_finder tool to find 1 or 2 relevant charts or graphs
    (e.g., a stock chart for a key mover, or a market index graph).
    
    Integrate these images seamlessly into the summary using markdown.
    Ensure the final output is well-formatted, clean, and visually appealing.
  expected_output: >
    A fully formatted financial summary in markdown,
    including the original text and 1-2 relevant, working image URLs with captions.
  agent: formatting_agent
  tools:
    - financial_image_finder
  context:
    - create_summary
  output_format: "markdown"
  requirements:
    max_images: 2
    image_types:
      - "stock_chart"
      - "market_index_graph"
    formatting:
      - "Markdown image syntax"
      - "Descriptive captions"
      - "Working image URLs"
      - "Clean and visually appealing"

# Task 4: Translate to Arabic
translate_to_arabic:
  description: >
    Translate the formatted financial summary to Arabic.
    
    It is CRITICAL to ensure that:
    - All financial terminology is translated accurately.
    - All stock symbols (e.g., TSLA, GOOGL) remain in English and unchanged.
    - All numbers, percentages, and currency figures are preserved exactly.
    - The original markdown formatting (headers, bold text, image links) is maintained.
  expected_output: >
    An accurate and complete Arabic translation of the
    formatted financial summary, with all critical requirements met.
  agent: translation_agent
  tools:
    - financial_translator
  context:
    - format_with_images
  output_format: "markdown"
  language_config:
    target_language: "arabic"
    preserve_elements:
      - "stock_symbols"
      - "numbers"
      - "percentages"
      - "currency_figures"
      - "markdown_formatting"
    critical_requirements:
      - "Financial terminology translated accurately"
      - "Stock symbols remain in English unchanged"
      - "Numbers preserved exactly"
      - "Markdown formatting maintained"

# Task 5: Translate to Hindi
translate_to_hindi:
  description: >
    Translate the formatted financial summary to Hindi, following
    the same critical requirements: preserve financial terms, keep stock symbols
    in English, maintain all numbers, and keep markdown formatting intact.
  expected_output: >
    An accurate and complete Hindi translation of the
    formatted financial summary.
  agent: translation_agent
  tools:
    - financial_translator
  context:
    - format_with_images
  output_format: "markdown"
  language_config:
    target_language: "hindi"
    preserve_elements:
      - "stock_symbols"
      - "numbers"
      - "percentages"
      - "currency_figures"
      - "markdown_formatting"
    critical_requirements:
      - "Financial terminology translated accurately"
      - "Stock symbols remain in English unchanged"
      - "Numbers preserved exactly"
      - "Markdown formatting maintained"

# Task 6: Translate to Hebrew
translate_to_hebrew:
  description: >
    Translate the formatted financial summary to Hebrew, following
    the same critical requirements: preserve financial terms, keep stock symbols
    in English, maintain all numbers, and keep markdown formatting intact.
  expected_output: >
    An accurate and complete Hebrew translation of the
    formatted financial summary.
  agent: translation_agent
  tools:
    - financial_translator
  context:
    - format_with_images
  output_format: "markdown"
  language_config:
    target_language: "hebrew"
    preserve_elements:
      - "stock_symbols"
      - "numbers"
      - "percentages"
      - "currency_figures"
      - "markdown_formatting"
    critical_requirements:
      - "Financial terminology translated accurately"
      - "Stock symbols remain in English unchanged"
      - "Numbers preserved exactly"
      - "Markdown formatting maintained"

# Task 7: Send to Telegram
send_to_telegram:
  description: >
    Distribute the financial summaries to the designated Telegram channel.
    
    Send each language version as a separate message in the following order:
    1. English (from the formatting task)
    2. Arabic (from the Arabic translation task)
    3. Hindi (from the Hindi translation task)
    4. Hebrew (from the Hebrew translation task)
    
    Use the telegram_sender tool for each message, ensuring each includes the
    appropriate language-specific header and a timestamp.
  expected_output: >
    A final confirmation message stating that all summaries
    (English, Arabic, Hindi, and Hebrew) have been successfully sent to Telegram.
  agent: send_agent
  tools:
    - telegram_sender
  context:
    - format_with_images
    - translate_to_arabic
    - translate_to_hindi
    - translate_to_hebrew
  output_format: "delivery_confirmation"
  delivery_config:
    send_order:
      1: "English (from formatting task)"
      2: "Arabic (from Arabic translation)"
      3: "Hindi (from Hindi translation)"
      4: "Hebrew (from Hebrew translation)"
    requirements:
      - "Language-specific header for each message"
      - "Timestamp for each message"
      - "Separate message per language"
      - "Confirmation of successful delivery"


# TASK EXECUTION SEQUENCE

task_execution:
  sequence_type: "sequential"
  total_tasks: 7
  execution_order:
    1: "search_financial_news"
    2: "create_summary"
    3: "format_with_images"
    4: "translate_to_arabic"
    5: "translate_to_hindi"
    6: "translate_to_hebrew"
    7: "send_to_telegram"
  
  # Task Dependencies 
  dependencies:
    search_financial_news: []
    create_summary: ["search_financial_news"]
    format_with_images: ["create_summary"]
    translate_to_arabic: ["format_with_images"]
    translate_to_hindi: ["format_with_images"]
    translate_to_hebrew: ["format_with_images"]
    send_to_telegram: ["format_with_images", "translate_to_arabic", "translate_to_hindi", "translate_to_hebrew"]

# TASK-SPECIFIC REQUIREMENTS

task_requirements:
  search_task:
    focus_areas:
      - "Major stock movements"
      - "Corporate earnings reports"
      - "Economic data releases"
      - "Federal Reserve policies"
      - "Market sector performance"
    output_requirements:
      - "5-10 highly relevant news items"
      - "Title, source, timestamp for each"
      - "Concise summary for each"
      - "Stock symbols identified"
    tools_required:
      - "tavily_financial_search"
      - "serper_financial_search"

  summary_task:
    structure_requirements:
      sections:
        1: "Market Overview (2-3 sentences)"
        2: "Key Movers (top 3-5 stocks)"
        3: "Sector Analysis (best/worst performing)"
        4: "Economic Highlights (significant data)"
        5: "Tomorrow's Watch (forward looking)"
    formatting_requirements:
      - "Professional tone"
      - "Under 500 words"
      - "CAPS for stock symbols (e.g., AAPL)"
      - "Include percentage changes"
      - "Include specific figures"

  formatting_task:
    image_requirements:
      - "1-2 relevant charts/graphs"
      - "Stock charts for key movers"
      - "Market index graphs"
      - "Markdown image syntax"
      - "Descriptive captions"
    formatting_requirements:
      - "Well-formatted"
      - "Clean presentation"
      - "Visually appealing"
      - "Working image URLs"

  translation_tasks:
    critical_preservation:
      - "Stock symbols unchanged (TSLA, GOOGL, etc.)"
      - "Numbers preserved exactly"
      - "Percentages preserved exactly"
      - "Currency figures preserved exactly"
      - "Markdown formatting maintained"
    accuracy_requirements:
      - "Financial terminology translated accurately"
      - "Professional quality"
      - "Complete translation"

  sending_task:
    delivery_requirements:
      - "4 separate messages (one per language)"
      - "Specific send order maintained"
      - "Language-specific headers"
      - "Timestamps included"
      - "Delivery confirmation required"


# ERROR HANDLING & VALIDATION

error_handling:
  task_failures:
    search_failure:
      - "Retry with alternative tools"
      - "Extend time range if needed"
      - "Log failure details"
    
    summary_failure:
      - "Retry with simplified structure"
      - "Check word count compliance"
      - "Validate required sections"
    
    formatting_failure:
      - "Continue without images if needed"
      - "Validate markdown syntax"
      - "Check image URL accessibility"
    
    translation_failure:
      - "Retry with alternative service"
      - "Validate preservation requirements"
      - "Check formatting integrity"
    
    sending_failure:
      - "Retry individual language deliveries"
      - "Validate Telegram connection"
      - "Check message length limits"


# QUALITY VALIDATION

quality_validation:
  summary_validation:
    word_count: "≤ 500 words"
    required_sections: 5
    formatting_checks:
      - "Stock symbols in CAPS"
      - "Percentage changes included"
      - "Professional tone maintained"
  
  translation_validation:
    preservation_checks:
      - "Stock symbols unchanged"
      - "Numerical data preserved"
      - "Markdown formatting intact"
    quality_checks:
      - "Financial terminology accurate"
      - "Complete translation provided"
      - "Professional quality maintained"
  
  delivery_validation:
    delivery_checks:
      - "All 4 languages sent"
      - "Correct send order followed"
      - "Headers and timestamps included"
      - "Confirmation messages received"


# METADATA

metadata:
  config_version: "1.0.0"
  aligned_with: "FinancialTasks Python implementation"
  task_count: 7
  execution_type: "sequential_with_dependencies"
  created_date: "2024-01-15"
  
  # Task Mapping 
  python_mapping:
    search_financial_news: "Task 1 in create_all_tasks()"
    create_summary: "Task 2 in create_all_tasks()"
    format_with_images: "Task 3 in create_all_tasks()"
    translate_to_arabic: "Task 4 in create_all_tasks()"
    translate_to_hindi: "Task 5 in create_all_tasks()"
    translate_to_hebrew: "Task 6 in create_all_tasks()"
    send_to_telegram: "Task 7 in create_all_tasks()"